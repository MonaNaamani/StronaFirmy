---
import { useStoryblokApi } from '@storyblok/astro'
import ArticleCard from '../components/ArticleCard.astro'

const storyblokApi = useStoryblokApi()
const { data } = await storyblokApi.get(`cdn/stories`, {
  version: 'draft', // or 'published'
  starts_with: 'blog/',
  is_startpage: false,
})

const articles = data.stories
---

<div class='headline'>
  <div class='headline-text'>
    <div class='main-text'>
      Our own
      <span class='accented-text'> personal blog </span>
      right here!
    </div>
    <div class='secondary-text'>
      Are you interested in learning more about certain things? If so, you've
      come to the right place! Content updated regularly and free of charge at
      your disposal.
    </div>
  </div>
</div>
<div class='blog-highlight'>
  {
    articles?.length &&
      articles.map((article) => {
        article.content.slug = article.slug
        return <ArticleCard article={article.content} />
      })
  }
</div>
